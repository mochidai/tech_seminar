# このクラスについて
* このクラスは、持永担当分テクニカルセミナーのページです
  
# 目標
* Goal #1 攻撃者のマインドセットを理解する
  * 
* Goal #2 防御側のマインドセットを理解する
  * 攻撃者のマインドセットが分からないと防御はできない
* Goal #3 セキュアなシステムの構築方法を学ぶ
# なぜコンピュータセキュリティは難しいのか
* コードはバグを含みがち
* ソーシャル・エンジニアリングはとても有効な手法である。
* 脆弱なシステム(Vulnerable Systems)を見つけたり、悪用したりすることは金銭的な利益になる。すなわち、システムを侵害する動機がある。
  * 脆弱性をやりとりするマーケット
  * 侵害したシステムやデータに関するマーケット
  * 金銭的な利益を得る様々な方法がある

# なぜコンピュータシステムを攻撃するのか？
* Spam
  * 正規のIPアドレスから送信することでスパムフィルターにブロックされにくい
* サービス妨害（Denial of Service: DoS）
  * 競合者を攻撃する、または身代金を得る
* サイトを訪問した利用者にマルウェアを仕込む
  * 1つのサーバを侵害してマルウェアに感染させることができれば、それらにアクセスする数百のクライアントにマルウェアを仕込むことが出来る。
* データの窃取
  * 認証情報、クレジットカード番号、知的財産などを窃取する

# 2019年時点でのコンピュータシステムへの攻撃の動機
* 暗号資産のマイニング
  * Webサーバを侵害してマイニングコードを埋め込むことで、Webサイトの訪問者の計算資源を活用する
* ランサムウェア
* 政治的な動機
* 2022年ではどうか？

# Webセキュリティとはなにか？
* ブラウザのセキュリティ
  * 例：同一オリジンポリシー（Same Origin Policy) ブラウザで複数のWebサイトを開いたとしても、それぞれのWebサイト間でのデータのやりとりを隔離しておく。
* サーバのアプリケーションのセキュリティ
  * 攻撃者は任意のHTTPクライアントを実行できる。そのため、どんなデータでもサーバに送ることが出来る。
  * 侵害するためには、脆弱性を悪用するようなデータを送信する。
* クライアントのアプリケーションのセキュリティ
  * Webアプリケーションをローカルで実行しているときに、ユーザを保護する
  * 不正な命令をクライアントで実行するクロスサイトスクリプティング（Cross Site Scripting: XSS）
    * Mc Donaldsのサイトで利用するパスワードを窃取する
    * WordPressは頻繁にXSS脆弱性が出る。例えば [WordPress 用プラグイン Newsletter におけるクロスサイトスクリプティングの脆弱性](https://jvndb.jvn.jp/ja/contents/2022/JVNDB-2022-000057.html)などがある。
      * 脆弱性を悪用(exploit)して管理者権限を持つ利用者を作成してサービスを乗っ取ることもできる。
* 利用者を守る
  * ソーシャルエンジニアリングから守る
  * データの漏えいを狙う人から守る
    * Cookies, Deep Packet Inspection
      * DPI（とそれによるフィルタリング）は、高度なネットワーク管理、ユーザーサービス、情報セキュリティを可能にし、他にもインターネットデータマイニング、傍受、ネット検閲なども可能にする。

# Webセキュリティはなぜ難しいのか
* 曖昧な目標：信頼できないコードを安全に実行する
* ブラウザのタブで複数のWebサイトが相互にデータをやりとりする
* ハードウェアへのアクセスも可能なコードが実行できる
* Webはパフォーマンス重視
* APIは機能重視（セキュリティは最優先事項ではない）
* 後方互換性（backwards compatibility）の要件
  * 歴史あるルールによって、一定のコンピュータならば使える

# ブラウザは不可能だと思われてきたことを出来るようにしてきた
Webサイトは、たとえ悪意のあるものであっても次のようなことができる。
* どこからでもコンテンツをダウンロードできる
* 新規プロセスを作成できる
* サーバに接続するソケットの作成、他のユーザのブラウザに対してもできる
* 様々な仕様のメディアを表示できる
* GPUに最適化されたようなコードの実行
* ファイルシステムからの読み込み・書き込み

# Webに関する様々な見方
* シンプルな文書閲覧システム
  * Tim Berners-LeeによるWWW
* 強力なアプリケーションプラットフォーム
  * Gmail, Google Docs, etc.

# Goal #3 セキュアなシステムの構築方法を学ぶ
* Part 1: ブラウザセキュリティモデル、Same Origin Policy
* Part 2: Client Security: attacks, defense
* Part 3: Server Security: attacks, defense, authentication, TLS
* Part 4: Writing secure code

# HTML
* [渡辺温「ああ華族様だよ　と私は嘘を吐くのであった」](https://www.aozora.gr.jp/cards/000020/files/2569_28291.html)
* ソースを見る
```
<?xml version="1.0" encoding="Shift_JIS"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" >
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=Shift_JIS" />
	<meta http-equiv="content-style-type" content="text/css" />
	<link rel="stylesheet" type="text/css" href="../../default.css" />
	<title>渡辺温 ああ華族様だよ　と私は嘘を吐くのであった</title>
	<link rel="Schema.DC" href="http://purl.org/dc/elements/1.1/" />
	<meta name="DC.Creator" content="渡辺温" />
	<meta name="DC.Publisher" content="青空文庫" />
</head>
<body>
<h1 class="title">ああ華族様だよ　と私は嘘を吐くのであった</h1>
<h2 class="author">渡辺温</h2>
<div class="main_text">
<br />
<br />
<br />
　居留地女の間では<br />
<br />
　その晩、私は隣室のアレキサンダー君に案内されて、始めて横浜へ遊びに出かけた。<br />
　アレキサンダー君は、そんな遊び場所に就いてなら、日本人の私なんぞよりも、遙かに詳かに心得ていた。<br />
　アレキサンダー君は、その自ら名告るところに依れば、旧露国帝室付舞踏師で、革命後上海から日本へ渡って来たのだが、踊を以て生業とすることが出来なくなって、今では銀座裏の、西洋料理店某でセロを弾いていると云う、つまり街頭で、よく見かける羅紗売りより僅かばかり上等な類のコーカサス人である。<br />
　それでも、遉にコーカサス生れの故か、髪も眼も真黒で却々<ruby><rb>眉目秀麗</rb><rp>（</rp><rt>ハンサム</rt><rp>）</rp></ruby>な男だったので、貧乏なのにも拘らず、居留地女の間では、格別可愛がられているらしい。<br />
　――アレキサンダー君は、露西亜語の他に、拙い日本語と、同じ位拙い英語とを喋ることが出来る。<br />
　桜木町の駅に降りたのが、かれこれ九時時分だったので、私達は、先ず暗い波止場の方を廻って、山下町の支那街へ行った。<br />
　そして、誰でも知っているインタアナショナル<ruby><rb>酒場</rb><rp>（</rp><rt>バア</rt><rp>）</rp></ruby>でビールを飲んだ。ここの家はどう云う理由か、エビス・ビールを看板にしているが、私はずっと前に、矢張りその界隈にあるハムブルグ酒場で、大変美味しいピルゼンのビールを飲んだことがあった。<br />
　独逸へ行こうと思っていた頃で、そこの酒場に居合せた軍艦エムデン号の乗組員だったと称する変な独逸人に、ハイデルベルヒの大学へ入る第一の資格は、ビールを四打飲めることだと唆かされて、私はピルズナア・ビールを二打飲んだのであった。<br />
『そのエムデンは店の人です、つまりサクラですね。――』<br />
　と、アレキサンダー君はハムブルクを斥けた。<br />
『それに、あすこには、こんな別嬪さん一人もいませんです。つまらないですね。』<br />
　アレキサンダー君は、さう云いながら、私達の<ruby><rb>卓子</rb><rp>（</rp><rt>テーブル</rt><rp>）</rp></ruby>を囲んで集まった、各自国籍の異るらしい四五人の女給の中で、一番器量良しの細い眼をした、金髪の少女の頤を指でつついたものだ。<br />
『マルウシャ！　日本人の小説を書く人に惚れています。――マルウシャ、云いなさい！』<br />
　その少女の噂は、私も既に聞いていた。彼女は私に、××氏から貰ったのだと云う<ruby><rb>手巾</rb><rp>（</rp><rt>ハンカチ</rt><rp>）</rp></ruby>を見せたりした。<br />
　それから彼女は、アレキサンダー君と組んで踊った。ストーヴの傍にいた家族の者らしい老夫婦が、ヴァイオリンと<ruby><rb>竪琴</rb><rp>（</rp><rt>ハープ</rt><rp>）</rp></ruby>とで<span class="notes">［＃「竪琴とで」は底本では「堅琴とで」］</span>それに和した。私はエビス・ビールが我慢出来なかったので、酒台のところに立って<ruby><rb>火酒</rb><rp>（</rp><rt>ウォトカ</rt><rp>）</rp></ruby>を飲んだ。<br />
　若い時分には、可なりの美人だったらしい面影を留めている女主人が、酒をつぎ乍ら私の話相手になってくれた。<br />
<br />
<br />
　いいよ　君が死ねば僕だって死ぬよ<br />
<br />
```

# Uniform Resource Locations (URLs)
`http://example.com:81/a/b.html?user=Alice&year=2019#p2` という形で記述する。
* Scheme
  * http, https, ftp等
* Hostname: example.com
* Port Number: 81
  * HTTPは80、HTTPSは443、FTPは80等
* Path: /a/b.html
* Query: user=Alice&year=2019
* Fragment: #p2

# URLの指定方法
* Full URL: `<a href='https://www.shibaura-it.ac.jp/headline/news.html'>Headline News</a>`
* Relative URL: `<a href='nid00002695.html'>新型コロナウイルス感染者の発生</a>`
  * 次のリンクと同じ`https://www.shibaura-it.ac.jp/news/nid00002695.html`
* Absolute URL: `<a href='/news'>Headline</a>`
  * 次のリンクと同じ`https://www.shibaura-it.ac.jp/news/`
* Fragment URL: `<a href='#section3'>3章にジャンプする</a>`
  * 同一ファイル内の`<a name='section3'>`に飛ぶ

# 他のHTMLタグ
* <img>
* <video>, <audio>
* <canvas>
* <link>, <style>
* <script>

# CSSを使った見た目の制御
* 外部からのCSS読み込み
* ファイル内部に直接CSSを書く
```
<!-- External CSS file -->
<link rel='stylesheet' href='/path/to/styles.css' />

<!-- Inline CSS -->
<style>
    body {
        color: hot-pink;
    }
</style>
```

# Javascriptをページ内に書く
```
<!-- External JS file -->
<script src='/path/to/script.js'></script>

<!-- Inline JS -->
<script>
    window.alert('hi there!')
</script>
```
# JavaScript
* 高機能
* たのしい
* 多くの機器にインストールされている
* 開発環境も揃っている

# Node.js
* コマンドライン上で実行するJavaScript
* ファイルシステム、DNS、ソケットといった機能がある
  * ブラウザ以外で実行可能
* 様々なモジュールがあって多くのデータ形式をサポートしている
  * Javascriptの進化は早い。そのため、あるとき機能が使えなくなっていることもある。

# JavaScript API
* JavaScriptで書かれている
* Document Object Modelに従ってファイルを操作する
* Node.jsにビルトインされている